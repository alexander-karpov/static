<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
    <title>Document</title>
    <style>
        @font-face {
            font-family: 'YS Text';
            src: url('https://yastatic.net/s3/home/fonts/ys/3/text-variable-full.woff2') format('woff2-variations');
            /* stylelint-disable-next-line font-weight-notation */
            font-weight: 400 700;
            font-display: swap;
        }

        * {
            font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', Roboto, 'Segoe UI', Arial, Helvetica, 'Arial Unicode MS', sans-serif;
        }

        body.ys * {
            letter-spacing: 0.012em;
            font-family: 'YS Text', -apple-system, BlinkMacSystemFont, 'Helvetica Neue', Roboto, 'Segoe UI', Arial, Helvetica, sans-serif;
        }

        body.transparent * {
            color: rgba(0, 0, 0, 0.5);
        }
    </style>

</head>

<body>
    <div id="message" style="color: red;"></div>

    <button onclick="run()">run</button>
    <button onclick="ys()">ys</button>
    <button onclick="transparent()">transparent</button>

    <div id="text-container">
        II
        Так думал молодой повеса,
        Летя в пыли на почтовых,
        Всевышней волею Зевеса
        Наследник всех своих родных.
        Друзья Людмилы и Руслана!
        С героем моего романа
        Без предисловий, сей же час
        Позвольте познакомить вас:
        Онегин, добрый мой приятель,
        Родился на брегах Невы,
        Где, может быть, родились вы
        Или блистали, мой читатель;
        Там некогда гулял и я:
        Но вреден север для меня 1.
        III
        Служив отлично благородно,
        Долгами жил его отец,
        Давал три бала ежегодно
        И промотался наконец.
        Судьба Евгения хранила:
        Сперва Madame за ним ходила,
        Потом Monsieur ее сменил.
        Ребенок был резов, но мил.
        Monsieur l'Abbé, француз убогой,
        Чтоб не измучилось дитя,
        Учил его всему шутя,
        Не докучал моралью строгой,
        Слегка за шалости бранил
        И в Летний сад гулять водил.
        IV
        Когда же юности мятежной
        Пришла Евгению пора,
        Пора надежд и грусти нежной,
        Monsieur прогнали со двора.
        Вот мой Онегин на свободе;
        Острижен по последней моде,
        Как dandy 2 лондонский одет —
        И наконец увидел свет.
        Он по-французски совершенно
        Мог изъясняться и писал;
        Легко мазурку танцевал
        И кланялся непринужденно;
        Чего ж вам больше? Свет решил,
        Что он умен и очень мил.
        V
        Мы все учились понемногу
        Чему-нибудь и как-нибудь,
        Так воспитаньем, слава богу,
        У нас немудрено блеснуть.
        Онегин был по мненью многих
        (Судей решительных и строгих)
        Ученый малый, но педант:
        Имел он счастливый талант
        Без принужденья в разговоре
        Коснуться до всего слегка,
        С ученым видом знатока
        Хранить молчанье в важном споре
        И возбуждать улыбку дам
        Огнем нежданных эпиграмм.
        VI
        Латынь из моды вышла ныне:
        Так, если правду вам сказать,
        Он знал довольно по-латыне,
        Чтоб эпиграфы разбирать,
        Потолковать об Ювенале,
        В конце письма поставить vale,
        Да помнил, хоть не без греха,
        Из Энеиды два стиха.
        Он рыться не имел охоты
        В хронологической пыли
        Бытописания земли:
        Но дней минувших анекдоты
        От Ромула до наших дней
        Хранил он в памяти своей.
        VII
        Высокой страсти не имея
        Для звуков жизни не щадить,
        Не мог он ямба от хорея,
        Как мы ни бились, отличить.
        Бранил Гомера, Феокрита;
        Зато читал Адама Смита
        И был глубокой эконом,
        То есть умел судить о том,
        Как государство богатеет,
        И чем живет, и почему
        Не нужно золота ему,
        Когда простой продукт имеет.
        Отец понять его не мог
        И земли отдавал в залог.
        VIII
        Всего, что знал еще Евгений,
        Пересказать мне недосуг;
        Но в чем он истинный был гений,
        Что знал он тверже всех наук,
        Что было для него измлада
        И труд, и мука, и отрада,
        Что занимало целый день
        Его тоскующую лень, —
        Была наука страсти нежной,
        Которую воспел Назон,
        За что страдальцем кончил он
        Свой век блестящий и мятежный
        В Молдавии, в глуши степей,
        Вдали Италии своей.</div>

    <script>
        const textContainer = document.querySelector('#text-container');
        const message = document.querySelector('#message');
        const texts = [];

        const words = textContainer.textContent.split(' ');

        for (let i = 0; i < 1000; i++) {
            texts.push(_.shuffle(words).join(' '));
        }

        function run() {
            const startTime = performance.now();

            for (const text of texts) {
                textContainer.textContent = text;
                message.textContent = `height ${textContainer.clientHeight}`;
            }

            const endTime = performance.now();
            message.textContent = endTime - startTime;
        }

        function ys() {
            document.body.classList.toggle('ys');
        }

        function transparent() {
            document.body.classList.toggle('transparent');
        }


    </script>
</body>

</html>
